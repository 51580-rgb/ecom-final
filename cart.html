<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cart</title>
<link rel="stylesheet" href="css/style.css">
</head>

<body onload="init(); loadCart();">

<div class="navbar">
  <div class="nav-inner">
    <div class="logo">Shopping Cart</div>
    <div class="nav-links">
      <a href="shop.html">Shop</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
  </div>
</div>

<div class="container">

  <h1 style="margin-bottom:50px;">Your Cart</h1>

  <div id="cartItems" class="cart-grid"></div>

  <h2 id="cartTotal" style="margin-top:40px;"></h2>

  <button class="btn" onclick="checkout()" style="margin-top:20px;max-width:300px;">
    ชำระเงิน
  </button>

</div>

<script src="js/app.js"></script>

<script>
function loadCart(){
  const cart=JSON.parse(localStorage.getItem("cart"))||[];
  const box=document.getElementById("cartItems");
  const totalBox=document.getElementById("cartTotal");

  box.innerHTML="";
  let total=0;

  cart.forEach(item=>{
    total+=item.price*item.qty;

    box.innerHTML+=`
      <div class="cart-card">
        <img src="${item.img}">
        <div class="cart-info">
          <h3>${item.name}</h3>
          <p>${item.price} ฿</p>
          <div class="qty-control">
            <button onclick="changeQty(${item.id},-1)">-</button>
            <strong>${item.qty}</strong>
            <button onclick="changeQty(${item.id},1)">+</button>
          </div>
          <p>รวม: ${item.price*item.qty} ฿</p>
        </div>
      </div>
    `;
  });

  totalBox.innerText="ยอดรวมทั้งหมด: "+total+" ฿";
}
</script>

</body>
</html>